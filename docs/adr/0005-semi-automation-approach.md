# ADR-0005: 半自動化アプローチ

## メタ情報
| 項目 | 内容 |
|------|------|
| ステータス | Accepted |
| 日付 | 2026-01-24 |
| 意思決定者 | プロジェクトオーナー |
| 関連ADR | [ADR-0001](./0001-three-project-integration.md), [ADR-0006](./0006-relay-workflow.md) |

## コンテキスト

### 背景
AI による小説生成には大きく2つのアプローチがある：
1. **完全自動生成**: AI がプロットから本文まで全て生成
2. **支援ツール**: AI は提案のみ、人間が全て判断

NovelWriter は完全自動に近く、Novel-Athanor はフェーズ管理による人間介入を重視していた。本プロジェクトでは、両者の中間となる「半自動」アプローチを模索する。

### 制約条件
- ユーザーの創作意図を尊重
- AI の生成能力を最大限活用
- 「作家が書いた」という実感を損なわない

### 要求事項
- 適切なタイミングでユーザー判断を求める
- 自動化できる部分は自動化
- ユーザーの介入度を調整可能

## 検討した選択肢

### Option A: 完全自動生成
**概要**: プロット入力後、AI が全章を自動生成

**メリット**:
- 高速な執筆
- ユーザー負担最小

**デメリット**:
- 「自分で書いた」実感がない
- 意図と異なる方向に進むリスク
- 創作の楽しみが失われる

### Option B: 提案型支援
**概要**: AI は常に提案を出し、ユーザーが選択・編集

**メリット**:
- ユーザーが完全にコントロール
- 創作の実感を維持

**デメリット**:
- 判断疲れ
- 効率が低い

### Option C: 半自動化（Phase-Gate-Approval）
**概要**: フェーズごとに自動処理 → 承認ゲート → 次フェーズ

```
[自動] 設定分析 → [承認] → [自動] プロット生成 → [承認] → [自動] 章執筆 → [承認]
```

**メリット**:
- 効率と制御のバランス
- 重要ポイントでのみ判断
- フェーズ単位での巻き戻しが可能

**デメリット**:
- ゲート設計が重要
- フェーズ間の調整が必要

### Option D: 適応型自動化
**概要**: ユーザーの介入履歴に基づき、自動化レベルを動的調整

**メリット**:
- 最も柔軟
- ユーザーに適応

**デメリット**:
- 実装複雑
- 予測困難な動作

## 3 Agents Analysis

### [Affirmative] 推進者の視点
> 最高の結果はどうなるか？どうすれば実現できるか？

- 半自動化なら「AI と一緒に書いた」という新しい創作体験
- 承認ゲートで「重要な決定は人間が行う」という安心感
- 自動化部分で効率化、承認部分で品質担保
- Novel-Athanor のフェーズ管理思想を発展させられる

### [Critical] 批判者の視点
> 最悪の場合どうなるか？何が壊れるか？

- ゲートが多すぎると「ただの承認作業」になる
- ゲートが少なすぎると意図と乖離する
- 巻き戻し時のデータ整合性
- ユーザーによって最適なバランスが異なる

### [Mediator] 調停者の視点
> 今、我々が取るべき最善のバランスは何か？

- Option C（Phase-Gate-Approval）を基本として採用
- ゲートは「創作上の重要決定」に絞る（プロット承認、章構成承認など）
- 将来的に Option D の要素を追加できる設計に
- The Relay ワークフロー（ADR-0006）と組み合わせて具体化

## 決定

**採用**: Option C（半自動化 / Phase-Gate-Approval）

### 決定理由
- 「AIとユーザーの協調的創作」というプロジェクトビジョンに最も合致
- Novel-Athanor のフェーズ管理を発展
- 効率と創作実感のバランス

### 却下理由
- **Option A**: 創作の実感が失われる
- **Option B**: 効率が低く判断疲れを起こす
- **Option D**: 現時点では実装複雑度が高すぎる

## 影響

### ポジティブな影響
- 「半自動」という明確なポジショニング
- ユーザーは重要な決定に集中できる
- 巻き戻し可能なフェーズ設計で失敗を恐れない

### ネガティブな影響
- ゲート設計の難しさ（緩和策: ユーザーテストで調整）
- 完全自動を期待するユーザーには物足りない可能性

### 影響を受けるコンポーネント
- `docs/specs/novel-generator-v2/07_workflow.md`: The Relay ワークフロー
- 全エージェント: 承認ゲートを考慮した設計
- UI/UX: 承認インターフェース

## 実装計画

### フェーズ1: 基本フロー
- [ ] フェーズ定義（Setup → Plot → Write → Review）
- [ ] 承認ゲート機構
- [ ] 状態管理

### フェーズ2: 巻き戻し機能
- [ ] スナップショット保存
- [ ] フェーズ単位のリストア

### フェーズ3: 調整機能
- [ ] 自動化レベル設定
- [ ] ゲートスキップオプション

## 検証方法
- ユーザーテストで「ちょうどよい介入度」を確認
- 承認ゲートの数と位置の最適化
- 「自分で書いた」実感のアンケート

## 参考資料
- `docs/specs/novel-generator-v2/07_workflow.md`: ワークフロー仕様
- `docs/specs/novel-generator-v2/00_overview.md`: 半自動の定義
- `docs/memo/最初の思いつき.md`: 協調的創作の構想
