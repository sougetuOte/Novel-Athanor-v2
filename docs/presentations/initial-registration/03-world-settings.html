<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ワールド設定 - 作品初回登録ガイド</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <a href="index.html" class="home-link">← 目次に戻る</a>

  <div class="presentation">

    <!-- Slide 1: Title -->
    <section class="slide slide-title active" data-slide="1">
      <h1>ワールド設定</h1>
      <p class="subtitle">作品初回登録ガイド Part 3</p>
      <p class="tagline">物語の舞台を構築する</p>
    </section>

    <!-- Slide 2: What is World Setting -->
    <section class="slide" data-slide="2">
      <h2>ワールド設定とは？</h2>

      <div class="concept-box">
        <h3>物語が展開される「世界」のルールと舞台</h3>
        <p class="lead">キャラクターが生きる環境を定義します</p>
      </div>

      <div class="content-grid">
        <div class="card">
          <h3>ワールド設定に含まれるもの</h3>
          <ul>
            <li><strong>地理</strong>：国、都市、地形</li>
            <li><strong>社会</strong>：政治、経済、階級</li>
            <li><strong>文化</strong>：宗教、風習、言語</li>
            <li><strong>ルール</strong>：魔法体系、技術レベル</li>
            <li><strong>歴史</strong>：過去の出来事</li>
          </ul>
        </div>

        <div class="card">
          <h3>なぜ登録が必要？</h3>
          <ul>
            <li><strong>一貫性</strong>：設定のブレを防止</li>
            <li><strong>AI支援</strong>：AIが設定を参照して執筆</li>
            <li><strong>整合性</strong>：矛盾を自動検出</li>
            <li><strong>伏線</strong>：世界観に関する伏線管理</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Slide 3: Categories -->
    <section class="slide" data-slide="3">
      <h2>設定カテゴリ</h2>
      <p>ワールド設定は以下のカテゴリに分類されます</p>

      <div class="content-grid">
        <div class="card">
          <h4>🌍 地理・場所</h4>
          <ul>
            <li>国・地域</li>
            <li>都市・村</li>
            <li>重要な施設</li>
            <li>自然環境</li>
          </ul>
        </div>

        <div class="card">
          <h4>👑 社会・政治</h4>
          <ul>
            <li>政治体制</li>
            <li>経済システム</li>
            <li>社会階級</li>
            <li>組織・勢力</li>
          </ul>
        </div>

        <div class="card">
          <h4>✨ ルール・システム</h4>
          <ul>
            <li>魔法体系</li>
            <li>技術レベル</li>
            <li>物理法則の違い</li>
            <li>特殊能力</li>
          </ul>
        </div>

        <div class="card">
          <h4>📜 歴史・文化</h4>
          <ul>
            <li>重要な歴史イベント</li>
            <li>宗教・信仰</li>
            <li>風習・伝統</li>
            <li>言語・文字</li>
          </ul>
        </div>
      </div>

      <div class="summary-box">
        <p><strong>すべてを埋める必要はありません</strong>：物語に登場する設定だけ登録すればOKです。</p>
      </div>
    </section>

    <!-- Slide 4: File Format -->
    <section class="slide" data-slide="4">
      <h2>ワールド設定のファイル形式</h2>

      <div class="content-split">
        <div>
          <h4>ファイルパス</h4>
          <div class="example-box">vault/{作品名}/world/{設定名}.md</div>

          <div class="card" style="margin-top: 1rem;">
            <h4>ディレクトリ構成例</h4>
            <div class="example-box" style="font-size: 0.85rem;">world/
├── 場所/
│   ├── 王都アルカディア.md
│   └── 禁断の森.md
├── 魔法体系.md
├── エルフ族.md
└── 王国の歴史.md</div>
          </div>
        </div>

        <div>
          <h4>ファイル例: 魔法体系.md</h4>
          <div class="example-box" style="font-size: 0.8rem;">---
type: world_setting
name: "魔法体系"
category: "ルール"
ai_visibility:
  default: 3
  hidden_section: 0
created: 2026-01-24
updated: 2026-01-24
tags:
  - world
  - magic
---

## 概要
この世界の魔法は「精霊」との契約に
基づいている。

## 基本原理
- 精霊との契約で魔法が使える
- 契約には代償が必要
- 強い魔法ほど大きな代償

## 属性
- 火、水、風、土の四大属性
- 光と闇の対極属性
- 無属性（禁忌）

## 制限
- 1人が契約できる精霊は3体まで
- 契約解除は死を意味する

## 隠し設定
<!-- ai_visibility: 0 -->
実は精霊は...</div>
        </div>
      </div>
    </section>

    <!-- Slide 5: AI Visibility for World -->
    <section class="slide" data-slide="5">
      <h2>ワールド設定のAI可視性</h2>
      <p>設定の一部を隠すことで、ネタバレを防止できます</p>

      <div class="content-grid">
        <div class="card">
          <h4><span class="vis-badge level-3">Level 3</span> 使用可能</h4>
          <p>AIが自由に使える情報</p>
          <ul>
            <li>一般的な世界観</li>
            <li>公開されている設定</li>
            <li>キャラが知っている情報</li>
          </ul>
        </div>

        <div class="card">
          <h4><span class="vis-badge level-2">Level 2</span> 内容認識</h4>
          <p>AIは知っているが、文章には出さない</p>
          <ul>
            <li>将来明かす設定</li>
            <li>暗示だけ許可する情報</li>
          </ul>
        </div>

        <div class="card">
          <h4><span class="vis-badge level-1">Level 1</span> 認識のみ</h4>
          <p>AIは「何かある」と知るだけ</p>
          <ul>
            <li>存在だけ示したい秘密</li>
          </ul>
        </div>

        <div class="card">
          <h4><span class="vis-badge level-0">Level 0</span> 完全秘匿</h4>
          <p>AIは存在すら知らない</p>
          <ul>
            <li>最大のサプライズ</li>
            <li>絶対に漏らしたくない設定</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Slide 6: Practical Example -->
    <section class="slide" data-slide="6">
      <h2>実践例: 魔法体系の登録</h2>

      <div class="content-split">
        <div>
          <h4>対話例</h4>
          <div class="card">
            <p><strong>あなた：</strong></p>
            <p style="background: var(--bg-card); padding: 1rem; border-radius: 0.5rem; font-size: 0.9rem;">
              魔法体系を登録したい。<br>
              精霊契約型の魔法で、4属性ある。<br>
              でも「無属性」という禁忌の魔法があって、それは物語の核心なのでAIには隠したい。
            </p>
          </div>

          <div class="card" style="margin-top: 1rem;">
            <p><strong>AI：</strong></p>
            <p style="background: var(--bg-card); padding: 1rem; border-radius: 0.5rem; font-size: 0.9rem;">
              承知しました。以下の構成で登録します：<br><br>
              ・基本原理 → Level 3（使用可能）<br>
              ・4属性 → Level 3<br>
              ・禁忌の存在 → Level 1（存在だけ認識）<br>
              ・無属性の詳細 → Level 0（完全秘匿）<br><br>
              よろしいですか？
            </p>
          </div>
        </div>

        <div>
          <h4>登録結果</h4>
          <div class="example-box" style="font-size: 0.8rem;">## 基本原理
<!-- ai_visibility: 3 -->
精霊との契約で魔法が使える。
契約には代償が必要。

## 属性
<!-- ai_visibility: 3 -->
火、水、風、土の四大属性がある。

## 禁忌
<!-- ai_visibility: 1 -->
この世界には「禁忌」とされる
魔法の領域が存在する。
（詳細はコンテキスト外）

## 隠し設定
<!-- ai_visibility: 0 -->
無属性魔法は精霊を殺すことで
得られる力であり...
（AIはこのセクションを認識しない）</div>
        </div>
      </div>
    </section>

    <!-- Slide 7: Location Settings -->
    <section class="slide" data-slide="7">
      <h2>場所設定のコツ</h2>

      <div class="content-split">
        <div>
          <div class="card card-highlight">
            <h3>場所設定で決めること</h3>
            <ul>
              <li><strong>名前</strong>：場所の名称</li>
              <li><strong>位置関係</strong>：他の場所との関係</li>
              <li><strong>特徴</strong>：見た目、雰囲気</li>
              <li><strong>機能</strong>：その場所の役割</li>
              <li><strong>関連キャラ</strong>：誰がいるか</li>
              <li><strong>関連イベント</strong>：何が起きるか</li>
            </ul>
          </div>

          <div class="exception-box" style="margin-top: 1rem;">
            <h4>登録のタイミング</h4>
            <p>物語に登場する直前に登録してもOK。最初から全て決める必要はありません。</p>
          </div>
        </div>

        <div>
          <h4>場所設定例</h4>
          <div class="example-box" style="font-size: 0.8rem;">---
type: world_setting
name: "王都アルカディア"
category: "場所"
---

## 概要
王国の首都。人口約10万人。
丘の上に王城がそびえる。

## 位置
王国の中央部、大河沿いに位置。

## 特徴
- 白い石壁に囲まれた美しい都市
- 中央に大聖堂がある
- 活気ある市場通り

## 重要施設
- 王城
- 大聖堂
- 魔術師ギルド
- 冒険者ギルド

## 関連キャラクター
- 国王
- 宰相
- 大聖堂の司祭

## 物語での役割
第一章の終盤で主人公が訪れる。
第四章の決戦の舞台。</div>
        </div>
      </div>
    </section>

    <!-- Slide 8: Shared Settings -->
    <section class="slide" data-slide="8">
      <h2>設定の共有と継承</h2>

      <div class="concept-box">
        <h3>複数作品で共通の設定を使いたい場合</h3>
        <p class="lead">シリーズ作品や同一世界観の作品で設定を共有できます</p>
      </div>

      <div class="content-split">
        <div>
          <div class="card">
            <h4>共有ディレクトリ構成</h4>
            <div class="example-box" style="font-size: 0.85rem;">vault/
├── shared/            # 共有設定
│   ├── magic_system.md
│   └── elves.md
├── 作品A/
│   └── world/
│       └── magic.md → ../../shared/...
└── 作品B/
    └── world/
        └── magic.md → ../../shared/...</div>
          </div>
        </div>

        <div>
          <div class="card">
            <h4>インポート設定</h4>
            <div class="example-box" style="font-size: 0.85rem;">---
type: world_setting
import: "vault/shared/magic_system.md"
override:
  - "詠唱方法"  # ローカルで上書き
---

## 詠唱方法
（この作品固有の設定）

## 魔法体系
<!-- imported from shared -->
（共有設定から読み込み）</div>
          </div>

          <div class="summary-box" style="margin-top: 1rem;">
            <p><strong>用途</strong>：同一世界観のシリーズ、スピンオフ作品など</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Slide 9: Exception Cases -->
    <section class="slide" data-slide="9">
      <h2>例外ケース：ワールド設定</h2>

      <div class="content-grid">
        <div class="exception-box">
          <h4>現代日本が舞台</h4>
          <p>特殊な設定がなければ最小限でOK。「現代日本、東京」程度の登録で十分です。</p>
          <p style="font-size: 0.85rem; color: var(--text-muted);">特殊なルール（超能力、裏社会など）がある場合はそれだけ登録。</p>
        </div>

        <div class="exception-box">
          <h4>設定が物語中で変化する</h4>
          <p>フェーズ管理を使います。「魔法が存在した時代」→「魔法が失われた時代」のように、時期別の設定を登録。</p>
        </div>

        <div class="exception-box">
          <h4>設定を後から追加したい</h4>
          <p>いつでも追加可能です。ただし、既存エピソードとの整合性チェックが走ります。矛盾があれば警告されます。</p>
        </div>

        <div class="exception-box">
          <h4>曖昧にしておきたい設定</h4>
          <p>「未定」として登録し、AI可視性をLevel 0に。後から詳細を決めて公開レベルを上げられます。</p>
          <div class="example-box" style="font-size: 0.8rem; margin-top: 0.5rem;">## 神の存在
<!-- ai_visibility: 0 -->
status: 未定
（物語の展開を見て決める）</div>
        </div>
      </div>
    </section>

    <!-- Slide 10: Summary -->
    <section class="slide" data-slide="10">
      <h2>まとめ - ワールド設定</h2>

      <div class="content-split">
        <div>
          <h3>このセクションで学んだこと</h3>
          <ul>
            <li>ワールド設定のカテゴリ</li>
            <li>ファイル形式とディレクトリ構成</li>
            <li>AI可視性の設定方法</li>
            <li>場所設定のコツ</li>
            <li>設定の共有と継承</li>
          </ul>

          <div class="card" style="margin-top: 1.5rem;">
            <h4>登録の優先順位</h4>
            <ol>
              <li>物語の核となる設定（魔法など）</li>
              <li>最初に登場する場所</li>
              <li>主要キャラに関わる設定</li>
              <li>その他（後から追加可）</li>
            </ol>
          </div>
        </div>

        <div>
          <h3>次のセクション</h3>
          <div class="card card-success">
            <h4>→ キャラクター設定</h4>
            <p>登場人物の設定を登録します。フェーズ管理、隠し設定の方法を学びます。</p>
            <a href="04-character-settings.html" style="color: var(--accent); font-weight: 600;">キャラクター設定へ進む →</a>
          </div>

          <div class="card" style="margin-top: 1rem;">
            <h4>前のセクション</h4>
            <a href="02-plot-design.html" style="color: var(--text-muted);">← プロット設計</a>
          </div>
        </div>
      </div>
    </section>

  </div>

  <!-- Navigation -->
  <nav class="nav">
    <button class="nav-btn" id="prev-btn" aria-label="前のスライド">←</button>
    <span class="nav-counter"><span id="current-slide">1</span> / <span id="total-slides">10</span></span>
    <button class="nav-btn" id="next-btn" aria-label="次のスライド">→</button>
  </nav>

  <div class="indicators" id="indicators"></div>

  <script>
    const slides = document.querySelectorAll('.slide');
    const totalSlides = slides.length;
    let currentSlide = 1;

    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const currentSlideSpan = document.getElementById('current-slide');
    const totalSlidesSpan = document.getElementById('total-slides');
    const indicatorsContainer = document.getElementById('indicators');

    totalSlidesSpan.textContent = totalSlides;

    for (let i = 1; i <= totalSlides; i++) {
      const indicator = document.createElement('div');
      indicator.className = 'indicator' + (i === 1 ? ' active' : '');
      indicator.dataset.slide = i;
      indicator.addEventListener('click', () => goToSlide(i));
      indicatorsContainer.appendChild(indicator);
    }

    function updateSlide() {
      slides.forEach((slide, index) => {
        slide.classList.toggle('active', index + 1 === currentSlide);
      });
      document.querySelectorAll('.indicator').forEach((ind, index) => {
        ind.classList.toggle('active', index + 1 === currentSlide);
      });
      currentSlideSpan.textContent = currentSlide;
      prevBtn.disabled = currentSlide === 1;
      nextBtn.disabled = currentSlide === totalSlides;
    }

    function goToSlide(n) {
      currentSlide = Math.max(1, Math.min(n, totalSlides));
      updateSlide();
    }

    function nextSlide() { if (currentSlide < totalSlides) { currentSlide++; updateSlide(); } }
    function prevSlide() { if (currentSlide > 1) { currentSlide--; updateSlide(); } }

    prevBtn.addEventListener('click', prevSlide);
    nextBtn.addEventListener('click', nextSlide);

    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); nextSlide(); }
      else if (e.key === 'ArrowLeft') { e.preventDefault(); prevSlide(); }
      else if (e.key === 'Home') { e.preventDefault(); goToSlide(1); }
      else if (e.key === 'End') { e.preventDefault(); goToSlide(totalSlides); }
    });

    let touchStartX = 0;
    document.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; });
    document.addEventListener('touchend', (e) => {
      const diff = touchStartX - e.changedTouches[0].screenX;
      if (Math.abs(diff) > 50) { diff > 0 ? nextSlide() : prevSlide(); }
    });
  </script>
</body>
</html>
